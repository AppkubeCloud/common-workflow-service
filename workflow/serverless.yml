service: workflow-lambda

frameworkVersion: '3'

useDotenv: true

plugins:
  - serverless-offline

provider:
  name: aws
  stage: dev
  timeout: 15
  runtime: nodejs18.x
  region: us-east-1

functions:
  GetProjectList:
    handler: project/getProject.getProject
    role: ${env:LAMBDA_ROLE}
    events:
      - http:
          path: /project
          method: get
          cors: true

  GetProjectWithFilter:
    handler: project/getProjectWithFilter.getProjectWithFilter
    role: ${env:LAMBDA_ROLE}
    events:
      - http:
          path: /project-with-filter
          method: get
          cors: true

  get_oneProjects_countusecase:
    handler: get_oneProjects_countusecase.get_oneProjects_countusecase 
    role: ${env:LAMBDA_ROLE}
    events:
    - http:
        path: /projects_usecase_overview
        method: get
        cors: true

  get_projects:
    handler: get_projects.get_projects 
    role: ${env:LAMBDA_ROLE}
    events:
    - http:
        path: /projects_usecase_overview
        method: get
        cors: true

  allresources:
    handler: getallresources.getallresource
    events:
    - http:
        path: /allresource
        method: get

  allresourcesbyfilter:
    handler: getallresourcebyfilter.getallresourcebyfilter
    events:
    - http:
        path: /allresourcebyfilter
        method: get

  filters:
    handler: filters.filters
    events:
      - httpApi:
          path: /filter
          method: get


  getprojectstasks:
    handler: getprojectstasks.getprojectstasks
    events:
      - httpApi:
          path: /getprojectstasks
          method: get

  projectfilters:
    handler: projectfilters.projectfilters
    events:
      - httpApi:
          path: /projectfilters
          method: get      
  
  get_allprojects:
    handler: get_allprojects.get_allprojects 
    role: ${env:LAMBDA_ROLE}
    events:
    - http:
        path: /projects
        method: get
        cors: true

  GetResourceList:
    handler: resource/getResourceList.getResourceList
    role: ${env:LAMBDA_ROLE}
    events:
      - http:
          path: /resource_list
          method: get
          cors: true

  getresourcelistbyproject:
    handler: getresourcelistbyproject.getresourcelistbyproject
    events:
      - httpApi:
          path: /getresourcelistbyproject
          method: get

  getresourcelistbyproject:
    handler: project/getProjectsOverview.getProjectsOverview
    role: ${env:LAMBDA_ROLE}
    events:
      - httpApi:
          path: /projects_overview
          method: get         